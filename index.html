<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Instaseis - Instant high frequency seismograms &mdash; instaseis 0.0.1a documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.2.0/simplex/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="instaseis 0.0.1a documentation" href="#" />
    <link rel="next" title="InstaseisDB" href="instaseis.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">
          Instaseis</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.1a</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://axisem.info">AxiSEM</a></li>
                <li><a href="http://obspy.org">ObsPy</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="instaseis.html">InstaseisDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh.html">Meshes</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">Sources and Receivers</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="instaseis.html" title="Next Chapter: InstaseisDB"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">InstaseisDB &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <a class="reference internal image-reference" href="http://lionkrischer.de/scratch/instaseis_logo.png"><img alt="http://lionkrischer.de/scratch/instaseis_logo.png" class="align-right" src="http://lionkrischer.de/scratch/instaseis_logo.png" /></a>
<div class="section" id="instaseis-instant-high-frequency-seismograms">
<h1>Instaseis - Instant high frequency seismograms<a class="headerlink" href="#instaseis-instant-high-frequency-seismograms" title="Permalink to this headline">¶</a></h1>
<p>Instaseis calculates high frequency seismograms from Green&#8217;s function databases
generated with <a class="reference external" href="http://axisem.info">AxiSEM</a>.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>Instaseis is implemented as a Python library and has a number of
dependencies which are listed here. It might well work with other versions but
that has not been tested and we do not officially support it. It currently runs
on Linux and Mac OS X. Adding support for Windows is mainly a question of
compiling the shared Fortran library. Pull requests are welcome.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">gfortran</span> <span class="pre">&gt;=</span> <span class="pre">4.7</span></tt></li>
<li><tt class="docutils literal"><span class="pre">Python</span> <span class="pre">2.6,</span> <span class="pre">2.7,</span> <span class="pre">3.3,</span> <span class="pre">or</span> <span class="pre">3.4</span></tt></li>
<li><tt class="docutils literal"><span class="pre">NumPy</span> <span class="pre">&gt;=</span> <span class="pre">1.7</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ObsPy</span> <span class="pre">&gt;=</span> <span class="pre">0.9.2</span></tt> <em>(only the ObsPy master currently supports Python 3)</em></li>
<li><tt class="docutils literal"><span class="pre">netCDF4</span> <span class="pre">&gt;=</span> <span class="pre">4.3</span></tt> including Python bindings (<tt class="docutils literal"><span class="pre">&gt;=</span> <span class="pre">1.1</span></tt>)</li>
</ul>
<p>The graphical user interface (which is optional and not needed to run
Instaseis) furthermore requires</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">PyQt4</span></tt></li>
<li><tt class="docutils literal"><span class="pre">pyqtgraph</span></tt></li>
<li><tt class="docutils literal"><span class="pre">matplolitb</span></tt></li>
<li><tt class="docutils literal"><span class="pre">basemap</span></tt></li>
</ul>
<p>Additionally the tests need</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">pytest</span></tt></li>
<li><tt class="docutils literal"><span class="pre">flake8</span></tt></li>
</ul>
<div class="section" id="fortran-compiler">
<h4>Fortran Compiler<a class="headerlink" href="#fortran-compiler" title="Permalink to this headline">¶</a></h4>
<p>If you don&#8217;t have <tt class="docutils literal"><span class="pre">gfortran</span></tt>, please install it (on Linux) with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install gfortran
</pre></div>
</div>
<p>or the equivalent of your distribution. On OSX we recommend to install
<a class="reference external" href="http://brew.sh/">Homebrew</a> and then use it to install <tt class="docutils literal"><span class="pre">gfortran</span></tt>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>brew install gcc
</pre></div>
</div>
</div>
<div class="section" id="python-and-dependencies">
<h4>Python and Dependencies<a class="headerlink" href="#python-and-dependencies" title="Permalink to this headline">¶</a></h4>
<p>If you know what you are doing, just make sure the aforementioned
dependencies are installed. Otherwise do yourself a favor and download the
<a class="reference external" href="https://store.continuum.io/cshop/anaconda/">Anaconda</a> Python distribution.
It is a free scientific Python distribution bundling almost all necessary
modules with a convenient installer (does not require root access!).
Once installed assert that <tt class="docutils literal"><span class="pre">pip</span></tt> and <tt class="docutils literal"><span class="pre">conda</span></tt> point to the Anaconda
installation folder (you need to open a new terminal after installing Anaconda)
and install the missing dependencies with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install obspy
<span class="nv">$ </span>pip install pyqtgraph pytest flake8
<span class="nv">$ </span>conda install basemap
</pre></div>
</div>
</div>
</div>
<div class="section" id="installing-instaseis">
<h3>Installing Instaseis<a class="headerlink" href="#installing-instaseis" title="Permalink to this headline">¶</a></h3>
<div class="section" id="user-installation">
<h4>User Installation<a class="headerlink" href="#user-installation" title="Permalink to this headline">¶</a></h4>
<p>Once released, installation of Instaseis is as easy as</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install instaseis
</pre></div>
</div>
</div>
<div class="section" id="developer-installation">
<h4>Developer Installation<a class="headerlink" href="#developer-installation" title="Permalink to this headline">¶</a></h4>
<p>Clone the git repository and install in an editable fashion.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git clone https://github.com/krischer/instaseis.git
<span class="nv">$ </span><span class="nb">cd </span>instaseis
<span class="nv">$ </span>pip install -v -e .
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing">
<h3>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h3>
<p>Tests are executed with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python -m instaseis.tests
</pre></div>
</div>
</div>
<div class="section" id="build-the-documentation">
<h3>Build the Documentation<a class="headerlink" href="#build-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>The documentation requires <tt class="docutils literal"><span class="pre">sphinx</span></tt> and the Bootstrap theme. Install both
with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install sphinx sphinx-bootstrap-theme
</pre></div>
</div>
<p>Build the doc with</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>doc
<span class="nv">$ </span>make html
</pre></div>
</div>
<p>Finally open the <tt class="docutils literal"><span class="pre">doc/_build/html/index.html</span></tt> file with the browser of your
choice or host it somewhere.</p>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Use it by creating an <tt class="xref py py-class docutils literal"><span class="pre">InstaseisDB</span></tt> object which needs
to know the path to the output folder containing the netCDF files from an
AxiSEM run. All information is determined from the netCDF files so no other
files have to be present.</p>
<p>Then a source and receiver pair is defined. The moment tensor components are in
<tt class="docutils literal"><span class="pre">N</span> <span class="pre">m</span></tt>. Lastly the <tt class="xref py py-meth docutils literal"><span class="pre">get_seismograms()</span></tt>
method is called which by default returns a three component ObsPy
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.9.2) v0.9)"><tt class="xref py py-class docutils literal"><span class="pre">Stream</span></tt></a> object with the waveform data. This can then
be used process and save the data in any format supported by ObsPy.</p>
<p>The initialization of an <tt class="xref py py-class docutils literal"><span class="pre">InstaseisDB</span></tt> object is the
most expensive part so make sure to do it only once if possible.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">instaseis</span> <span class="kn">import</span> <span class="n">InstaseisDB</span><span class="p">,</span> <span class="n">Source</span><span class="p">,</span> <span class="n">Receiver</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">db</span> <span class="o">=</span> <span class="n">InstaseisDB</span><span class="p">(</span><span class="s">&quot;./prem50s_forces&quot;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">receiver</span> <span class="o">=</span> <span class="n">Receiver</span><span class="p">(</span><span class="n">latitude</span><span class="o">=</span><span class="mf">42.6390</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="mf">74.4940</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">source</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">latitude</span><span class="o">=</span><span class="mf">89.91</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">depth_in_m</span><span class="o">=</span><span class="mi">12000</span><span class="p">,</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">m_rr</span> <span class="o">=</span> <span class="mf">4.710000e+24</span> <span class="o">/</span> <span class="mf">1E7</span><span class="p">,</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">m_tt</span> <span class="o">=</span> <span class="mf">3.810000e+22</span> <span class="o">/</span> <span class="mf">1E7</span><span class="p">,</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">m_pp</span> <span class="o">=-</span><span class="mf">4.740000e+24</span> <span class="o">/</span> <span class="mf">1E7</span><span class="p">,</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">m_rt</span> <span class="o">=</span> <span class="mf">3.990000e+23</span> <span class="o">/</span> <span class="mf">1E7</span><span class="p">,</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">m_rp</span> <span class="o">=-</span><span class="mf">8.050000e+23</span> <span class="o">/</span> <span class="mf">1E7</span><span class="p">,</span>
   <span class="o">...</span><span class="p">:</span>     <span class="n">m_tp</span> <span class="o">=-</span><span class="mf">1.230000e+24</span> <span class="o">/</span> <span class="mf">1E7</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">st</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_seismograms</span><span class="p">(</span><span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="n">receiver</span><span class="o">=</span><span class="n">receiver</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="k">print</span> <span class="n">st</span>
<span class="mi">3</span> <span class="n">Trace</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="ow">in</span> <span class="n">Stream</span><span class="p">:</span>
<span class="o">...</span><span class="n">BXZ</span> <span class="o">|</span> <span class="mi">1970</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span><span class="n">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mf">00.000000</span><span class="n">Z</span> <span class="o">-</span> <span class="o">...</span> <span class="o">|</span> <span class="mf">12.5</span> <span class="n">s</span><span class="p">,</span> <span class="mi">144</span> <span class="n">samples</span>
<span class="o">...</span><span class="n">BXN</span> <span class="o">|</span> <span class="mi">1970</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span><span class="n">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mf">00.000000</span><span class="n">Z</span> <span class="o">-</span> <span class="o">...</span> <span class="o">|</span> <span class="mf">12.5</span> <span class="n">s</span><span class="p">,</span> <span class="mi">144</span> <span class="n">samples</span>
<span class="o">...</span><span class="n">BXE</span> <span class="o">|</span> <span class="mi">1970</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span><span class="n">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mf">00.000000</span><span class="n">Z</span> <span class="o">-</span> <span class="o">...</span> <span class="o">|</span> <span class="mf">12.5</span> <span class="n">s</span><span class="p">,</span> <span class="mi">144</span> <span class="n">samples</span>
</pre></div>
</div>
</div>
<div class="section" id="gui">
<h2>GUI<a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h2>
<p>Instaseis contains an optional graphical user interface which might be
useful for some purposes. To execute it just type</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python -m instaseis.gui
</pre></div>
</div>
<img alt="http://i.imgur.com/FVmua2X.png" src="http://i.imgur.com/FVmua2X.png" />
</div>
<div class="section" id="detailed-documentation">
<h2>Detailed Documentation<a class="headerlink" href="#detailed-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="instaseis.html">InstaseisDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="mesh.html">Meshes</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">Sources and Receivers</a></li>
</ul>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Lion Krischer and Martin van Driel.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>