
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Main Instaseis Classes &mdash; instaseis 0.0.1a-144-gcbce documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.4/simplex/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/my-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1a-144-gcbce',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="instaseis 0.0.1a-144-gcbce documentation" href="index.html" />
    <link rel="next" title="Instaseis Server" href="server.html" />
    <link rel="prev" title="Instaseis: Instant Global Seismograms Based on a Broadband Waveform Database" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Instaseis</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.1a-144-gcbce</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://axisem.info">AxiSEM</a></li>
                <li><a href="http://obspy.org">ObsPy</a></li>
                <li><a href="http://github.com/krischer/instaseis">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Main Instaseis Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Instaseis Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="source.html">Sources and Receivers</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="main-instaseis-classes">
<h1>Main Instaseis Classes<a class="headerlink" href="#main-instaseis-classes" title="Permalink to this headline">¶</a></h1>
<p>This page documents the central <a class="reference internal" href="#instaseis.open_db" title="instaseis.open_db"><code class="xref py py-func docutils literal"><span class="pre">open_db()</span></code></a> function and the
main Instaseis classes. Please always use the <a class="reference internal" href="#instaseis.open_db" title="instaseis.open_db"><code class="xref py py-func docutils literal"><span class="pre">open_db()</span></code></a>
function to open a connection to an Instaseis database.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#open-db-function" id="id1">open_db() Function</a></li>
<li><a class="reference internal" href="#baseinstaseisdb" id="id2">BaseInstaseisDB</a></li>
<li><a class="reference internal" href="#instaseisdb" id="id3">InstaseisDB</a></li>
<li><a class="reference internal" href="#remoteinstaseisdb" id="id4">RemoteInstaseisDB</a></li>
</ul>
</div>
<div class="section" id="open-db-function">
<h2><a class="toc-backref" href="#id1">open_db() Function</a><a class="headerlink" href="#open-db-function" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="instaseis.open_db">
<code class="descclassname">instaseis.</code><code class="descname">open_db</code><span class="sig-paren">(</span><em>path</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/instaseis.html#open_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#instaseis.open_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Central function to open a local or remote Instaseis database. Any
keyword arguments are passed to the underlying
<a class="reference internal" href="#instaseis.instaseis_db.InstaseisDB" title="instaseis.instaseis_db.InstaseisDB"><code class="xref py py-class docutils literal"><span class="pre">InstaseisDB</span></code></a> or
<a class="reference internal" href="#instaseis.remote_instaseis_db.RemoteInstaseisDB" title="instaseis.remote_instaseis_db.RemoteInstaseisDB"><code class="xref py py-class docutils literal"><span class="pre">RemoteInstaseisDB</span></code></a> classes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Filepath or URL. Instaseis will determine if it is a local
file path or a HTTP URL and delegate to the corresponding class.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An initialized database object.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#instaseis.instaseis_db.InstaseisDB" title="instaseis.instaseis_db.InstaseisDB"><code class="xref py py-class docutils literal"><span class="pre">InstaseisDB</span></code></a> or
<a class="reference internal" href="#instaseis.remote_instaseis_db.RemoteInstaseisDB" title="instaseis.remote_instaseis_db.RemoteInstaseisDB"><code class="xref py py-class docutils literal"><span class="pre">RemoteInstaseisDB</span></code></a></td>
</tr>
</tbody>
</table>
<p>If a directory is passed, it will return a local Instaseis database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">instaseis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">instaseis</span><span class="o">.</span><span class="n">open_db</span><span class="p">(</span><span class="s">&quot;/path/to/DB&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
<span class="go">InstaseisDB reciprocal Green&#39;s function Database (v7) generated ...</span>
<span class="go">    components           : vertical and horizontal</span>
<span class="go">    velocity model       : ak135f</span>
<span class="go">    ...</span>
</pre></div>
</div>
<p>For an HTTP URL it will return a remote Instaseis database:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">instaseis</span><span class="o">.</span><span class="n">open_db</span><span class="p">(</span><span class="s">&quot;http://webadress.com:8765&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
<span class="go">RemoteInstaseisDB reciprocal Green&#39;s function Database (v7) generated ...</span>
<span class="go">    components           : vertical and horizontal</span>
<span class="go">    velocity model       : ak135f</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If opening a local database and the <code class="docutils literal"><span class="pre">ordered_output.nc4</span></code> files are
located for example in <code class="docutils literal"><span class="pre">/path/to/DB/PZ/Data</span></code> and
<code class="docutils literal"><span class="pre">/path/to/DB/PX/Data</span></code>, please pass <code class="docutils literal"><span class="pre">/path/to/DB</span></code> to the
<a class="reference internal" href="#instaseis.open_db" title="instaseis.open_db"><code class="xref py py-func docutils literal"><span class="pre">open_db()</span></code></a> function. Instaseis will recursively
search the child directories for the  necessary files and open them.</p>
</div>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="baseinstaseisdb">
<h2><a class="toc-backref" href="#id2">BaseInstaseisDB</a><a class="headerlink" href="#baseinstaseisdb" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="instaseis.base_instaseis_db.BaseInstaseisDB">
<em class="property">class </em><code class="descclassname">instaseis.base_instaseis_db.</code><code class="descname">BaseInstaseisDB</code><a class="reference internal" href="_modules/instaseis/base_instaseis_db.html#BaseInstaseisDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#instaseis.base_instaseis_db.BaseInstaseisDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all Instaseis database classes defining the user interface.</p>
<dl class="method">
<dt id="instaseis.base_instaseis_db.BaseInstaseisDB.get_seismograms">
<code class="descname">get_seismograms</code><span class="sig-paren">(</span><em>source</em>, <em>receiver</em>, <em>components=(u'Z'</em>, <em>u'N'</em>, <em>u'E')</em>, <em>kind=u'displacement'</em>, <em>remove_source_shift=True</em>, <em>reconvolve_stf=False</em>, <em>return_obspy_stream=True</em>, <em>dt=None</em>, <em>a_lanczos=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/instaseis/base_instaseis_db.html#BaseInstaseisDB.get_seismograms"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#instaseis.base_instaseis_db.BaseInstaseisDB.get_seismograms" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract seismograms from the Green&#8217;s function database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>source</strong> (<a class="reference internal" href="source.html#instaseis.source.Source" title="instaseis.source.Source"><code class="xref py py-class docutils literal"><span class="pre">instaseis.source.Source</span></code></a> or
<a class="reference internal" href="source.html#instaseis.source.ForceSource" title="instaseis.source.ForceSource"><code class="xref py py-class docutils literal"><span class="pre">instaseis.source.ForceSource</span></code></a>) &#8211; The source definition.</li>
<li><strong>receiver</strong> (<a class="reference internal" href="source.html#instaseis.source.Receiver" title="instaseis.source.Receiver"><code class="xref py py-class docutils literal"><span class="pre">instaseis.source.Receiver</span></code></a>) &#8211; The seismic receiver.</li>
<li><strong>components</strong> (<em>tuple of str, optional</em>) &#8211; Which components to calculate. Must be a tuple
containing any combination of <code class="docutils literal"><span class="pre">&quot;Z&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;N&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;E&quot;</span></code>,
<code class="docutils literal"><span class="pre">&quot;R&quot;</span></code>, and <code class="docutils literal"><span class="pre">&quot;T&quot;</span></code>.</li>
<li><strong>kind</strong> (<em>str, optional</em>) &#8211; The desired units of the seismogram:
<code class="docutils literal"><span class="pre">&quot;displacement&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;velocity&quot;</span></code>, or <code class="docutils literal"><span class="pre">&quot;acceleration&quot;</span></code>.</li>
<li><strong>remove_source_shift</strong> (<em>bool, optional</em>) &#8211; Move the starttime of the seismogram to
the peak of the sliprate from the source time function used to
generate the database.</li>
<li><strong>reconvolve_stf</strong> (<em>bool, optional</em>) &#8211; Deconvolve the source time function used in
the AxiSEM run and convolve with the STF attached to the source.
For this to be stable, the new STF needs to bandlimited.</li>
<li><strong>return_obspy_stream</strong> (<em>bool, optional</em>) &#8211; Return format is either an
<a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a> object or a dictionary
containing the raw NumPy arrays.</li>
<li><strong>dt</strong> (<em>float, optional</em>) &#8211; Desired sampling rate of the seismograms. Resampling is done
using a Lanczos kernel.</li>
<li><strong>a_lanczos</strong> (<em>int, optional</em>) &#8211; The width of the kernel used in the resampling.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Multi component seismograms.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A <a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a> object or a dictionary
with NumPy arrays as values.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="instaseis.base_instaseis_db.BaseInstaseisDB.get_seismograms_finite_source">
<code class="descname">get_seismograms_finite_source</code><span class="sig-paren">(</span><em>sources</em>, <em>receiver</em>, <em>components=(u'Z'</em>, <em>u'N'</em>, <em>u'E')</em>, <em>kind=u'displacement'</em>, <em>dt=None</em>, <em>a_lanczos=5</em>, <em>correct_mu=False</em>, <em>progress_callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/instaseis/base_instaseis_db.html#BaseInstaseisDB.get_seismograms_finite_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#instaseis.base_instaseis_db.BaseInstaseisDB.get_seismograms_finite_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract seismograms for a finite source from an Instaseis database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sources</strong> (<a class="reference internal" href="source.html#instaseis.source.FiniteSource" title="instaseis.source.FiniteSource"><code class="xref py py-class docutils literal"><span class="pre">FiniteSource</span></code></a> or list of
<a class="reference internal" href="source.html#instaseis.source.Source" title="instaseis.source.Source"><code class="xref py py-class docutils literal"><span class="pre">Source</span></code></a> objects.) &#8211; A collection of point sources.</li>
<li><strong>receiver</strong> (<a class="reference internal" href="source.html#instaseis.source.Receiver" title="instaseis.source.Receiver"><code class="xref py py-class docutils literal"><span class="pre">instaseis.source.Receiver</span></code></a>) &#8211; The seismic receiver.</li>
<li><strong>components</strong> (<em>tuple of str, optional</em>) &#8211; Which components to calculate. Must be a tuple
containing any combination of <code class="docutils literal"><span class="pre">&quot;Z&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;N&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;E&quot;</span></code>,
<code class="docutils literal"><span class="pre">&quot;R&quot;</span></code>, and <code class="docutils literal"><span class="pre">&quot;T&quot;</span></code>.</li>
<li><strong>kind</strong> (<em>str, optional</em>) &#8211; The desired units of the seismogram:
<code class="docutils literal"><span class="pre">&quot;displacement&quot;</span></code>, <code class="docutils literal"><span class="pre">&quot;velocity&quot;</span></code>, or <code class="docutils literal"><span class="pre">&quot;acceleration&quot;</span></code>.</li>
<li><strong>dt</strong> (<em>float, optional</em>) &#8211; Desired sampling rate of the seismograms. Resampling is done
using a Lanczos kernel.</li>
<li><strong>a_lanczos</strong> (<em>int, optional</em>) &#8211; The width of the kernel used in the resampling.</li>
<li><strong>correct_mu</strong> (<em>bool, optional</em>) &#8211; Correct the source magnitude for the actual shear
modulus from the model.</li>
<li><strong>progress_callback</strong> (<em>function, optional</em>) &#8211; Optional callback function that will be
called with current source number and the number of total
sources for each calculated source. Useful for integration into
user interfaces to provide some kind of progress information. If
the callback returns <code class="docutils literal"><span class="pre">True</span></code>, the calculation will be cancelled.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Multi component finite source seismogram.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.obspy.org/packages/autogen/obspy.core.stream.Stream.html#obspy.core.stream.Stream" title="(in ObsPy Documentation (0.10.2) v0.10)"><code class="xref py py-class docutils literal"><span class="pre">obspy.core.stream.Stream</span></code></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="instaseisdb">
<h2><a class="toc-backref" href="#id3">InstaseisDB</a><a class="headerlink" href="#instaseisdb" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="instaseis.instaseis_db.InstaseisDB">
<em class="property">class </em><code class="descclassname">instaseis.instaseis_db.</code><code class="descname">InstaseisDB</code><span class="sig-paren">(</span><em>db_path</em>, <em>buffer_size_in_mb=100</em>, <em>read_on_demand=False</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/instaseis/instaseis_db.html#InstaseisDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#instaseis.instaseis_db.InstaseisDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for extracting seismograms from a local Instaseis database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>db_path</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; Path to the Instaseis Database containing
subdirectories PZ and/or PX each containing a
<code class="docutils literal"><span class="pre">order_output.nc4</span></code> file.</li>
<li><strong>buffer_size_in_mb</strong> (<em>int, optional</em>) &#8211; Strain and displacement are buffered to
avoid repeated disc access. Depending on the type of database
and the number of components of the database, the total buffer
memory can be up to four times this number. The optimal value is
highly application and system dependent.</li>
<li><strong>read_on_demand</strong> (<em>bool, optional</em>) &#8211; Read several global fields on demand (faster
initialization) or on initialization (slower
initialization, faster in individual seismogram extraction,
useful e.g. for finite sources, default).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<hr class="docutils" />
<div class="section" id="remoteinstaseisdb">
<h2><a class="toc-backref" href="#id4">RemoteInstaseisDB</a><a class="headerlink" href="#remoteinstaseisdb" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="instaseis.remote_instaseis_db.RemoteInstaseisDB">
<em class="property">class </em><code class="descclassname">instaseis.remote_instaseis_db.</code><code class="descname">RemoteInstaseisDB</code><span class="sig-paren">(</span><em>url</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/instaseis/remote_instaseis_db.html#RemoteInstaseisDB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#instaseis.remote_instaseis_db.RemoteInstaseisDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Remote Instaseis database interface.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>url</strong> &#8211; URL to the remote Instaseis server.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Lion Krischer and Martin van Driel.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>